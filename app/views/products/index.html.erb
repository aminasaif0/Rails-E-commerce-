<h1>Product List</h1>
<% if current_user %>
  <%= link_to "Sign Out", destroy_user_session_path, data: { "turbo-method": :delete } %>
<% else %>
  <%= link_to 'Sign In', new_user_session_path %>
<% end %>

<% @products.each do |product| %>
  <div class="product">
    <h2><%= link_to product.name, product %></h2>
    <p><strong>Description:</strong> <%= product.description %></p>
    <p><strong>Price:</strong> <%= number_to_currency(product.price, unit: "PKR", precision: 2) %></p>
    <p><strong>Stock Quantity:</strong> <%= product.stock_quantity %></p>
    <% if current_user %>
      <%= button_to 'Add to Cart', add_to_cart_product_path(product), method: :post %>
    <% end %>

  </div>
<% end %>

<% if policy(Product).create? %>
  <%= link_to 'New Product', new_product_path %>
<% end %>
